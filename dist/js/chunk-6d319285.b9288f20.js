(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d319285"],{2168:function(e,i,n){},"40f2":function(e,i,n){"use strict";n.r(i);var t=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 宿舍管理")])],1)],1),n("div",{staticClass:"expand"},[n("div",[n("el-button",{on:{click:e.handleAddTop}},[e._v("增加宿舍")]),e.isLoadingTree?n("el-tree",{ref:"expandMenuList",staticClass:"expand-tree",attrs:{data:e.setTree,"node-key":"id","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent,"default-expanded-keys":e.defaultExpandKeys},on:{"node-click":e.handleNodeClick}}):e._e()],1)])])},d=[],a=n("8352"),s={maxexpandId:95,treelist:[{id:1,name:"宿舍南区",ProSort:1,pid:"",isEdit:!1,children:[{id:35,name:"一栋",pid:1,remark:"",isEdit:!1,children:[{id:96,name:"101",pid:1,remark:"",isEdit:!1,children:[]},{id:97,name:"102",pid:1,remark:"",isEdit:!1,children:[]}]},{id:36,name:"二栋",pid:1,isEdit:!1,children:[]},{id:37,name:"三栋",pid:1,isEdit:!1,children:[]},{id:38,name:"四栋",pid:1,isEdit:!1,children:[]},{id:39,name:"五栋",pid:1,isEdit:!1,children:[]},{id:40,name:"六栋",pid:1,isEdit:!1,children:[]}]},{id:2,name:"宿舍北区",ProSort:2,pid:"",isEdit:!1,children:[{id:41,name:"一栋",pid:2,isEdit:!1,children:[]},{id:42,name:"二栋",pid:2,isEdit:!1,children:[]},{id:43,name:"三栋",pid:2,isEdit:!1,children:[]},{id:44,name:"四栋",pid:2,isEdit:!1,children:[]}]},{id:3,name:"宿舍中区",ProSort:5,pid:"",isEdit:!1,children:[{id:45,name:"一栋",pid:3,isEdit:!1,children:[]},{id:46,name:"二栋",pid:3,isEdit:!1,children:[]},{id:47,name:"三栋",pid:3,isEdit:!1,children:[]},{id:48,name:"四栋",pid:3,isEdit:!1,children:[]},{id:49,name:"五栋",pid:3,isEdit:!1,children:[]}]}]},r={name:"tree",data:function(){return{maxexpandId:s.maxexpandId,non_maxexpandId:s.maxexpandId,isLoadingTree:!1,setTree:s.treelist,defaultProps:{children:"children",label:"name"},defaultExpandKeys:[]}},mounted:function(){console.log(s),this.initExpand()},methods:{initExpand:function(){var e=this;this.setTree.map(function(i){e.defaultExpandKeys.push(i.id)}),this.isLoadingTree=!0},handleNodeClick:function(e,i,n){e.isEdit=!1},renderContent:function(e,i){var n=i.node,t=i.data,d=i.store,s=this;return e(a["a"],{props:{DATA:t,NODE:n,STORE:d,maxexpandId:s.non_maxexpandId},on:{nodeAdd:function(e,i,n){return s.handleAdd(e,i,n)},nodeEdit:function(e,i,n){return s.handleEdit(e,i,n)},nodeDel:function(e,i,n){return s.handleDelete(e,i,n)}}})},handleAddTop:function(){this.setTree.push({id:++this.maxexpandId,name:"新增节点",pid:"",isEdit:!1,children:[]})},handleAdd:function(e,i,n){if(console.log(e,i,n),n.level>=6)return this.$message.error("最多只支持五级！"),!1;i.children.push({id:++this.maxexpandId,name:"新增节点",pid:i.id,isEdit:!1,children:[]}),n.expanded||(n.expanded=!0)},handleEdit:function(e,i,n){console.log(e,i,n)},handleDelete:function(e,i,n){var t=this;console.log(e,i,n);var d=this;if(i.children&&0!==i.children.length)return this.$message.error("此节点有子级，不可删除！"),!1;var a=function(){var e=n.parent.data.children||n.parent.data,d=99999;e.map(function(e,n){i.id==e.id&&(d=n)});e.splice(d,1);t.$message.success("删除成功！")},s=function(){d.$confirm("是否删除此节点？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){return!1})};i.id>this.non_maxexpandId?a():s()}}},o=r,c=(n("6380"),n("2877")),l=Object(c["a"])(o,t,d,!1,null,null,null);l.options.__file="Dormitory.vue";i["default"]=l.exports},6380:function(e,i,n){"use strict";var t=n("2168"),d=n.n(t);d.a},8352:function(e,i,n){"use strict";var t=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("span",{staticClass:"tree-expand"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.DATA.isEdit,expression:"DATA.isEdit"}],staticClass:"tree-label"},[n("el-input",{ref:"treeInput"+e.DATA.id,staticClass:"edit",attrs:{size:"mini",autofocus:""},on:{blur:function(i){i.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE)}},nativeOn:{click:function(i){return i.stopPropagation(),e.nodeEditFocus(i)},keyup:function(i){if(!("button"in i)&&e._k(i.keyCode,"enter",13,i.key,"Enter"))return null;i.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE)}},model:{value:e.DATA.name,callback:function(i){e.$set(e.DATA,"name",i)},expression:"DATA.name"}})],1),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],class:[e.DATA.id>e.maxexpandId?"tree-new tree-label":"tree-label"]},[n("span",[e._v(e._s(e.DATA.name))])]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],staticClass:"tree-btn"},[n("i",{staticClass:"el-icon-plus",on:{click:function(i){i.stopPropagation(),e.nodeAdd(e.STORE,e.DATA,e.NODE)}}}),n("i",{staticClass:"el-icon-edit",on:{click:function(i){i.stopPropagation(),e.nodeEdit(e.STORE,e.DATA,e.NODE)}}}),n("i",{staticClass:"el-icon-delete",on:{click:function(i){i.stopPropagation(),e.nodeDel(e.STORE,e.DATA,e.NODE)}}})])])},d=[],a={name:"treeExpand",props:["NODE","DATA","STORE","maxexpandId"],methods:{nodeAdd:function(e,i,n){this.$emit("nodeAdd",e,i,n)},nodeEdit:function(e,i,n){var t=this;i.isEdit=!0,this.$nextTick(function(){t.$refs["treeInput"+i.id].$refs.input.focus()}),this.$emit("nodeEdit",e,i,n)},nodeDel:function(e,i,n){this.$emit("nodeDel",e,i,n)},nodeEditPass:function(e,i,n){i.isEdit=!1},nodeEditFocus:function(){}}},s=a,r=(n("f033"),n("2877")),o=Object(r["a"])(s,t,d,!1,null,null,null);o.options.__file="TreeRender.vue";i["a"]=o.exports},cf74:function(e,i,n){},f033:function(e,i,n){"use strict";var t=n("cf74"),d=n.n(t);d.a}}]);
//# sourceMappingURL=chunk-6d319285.b9288f20.js.map